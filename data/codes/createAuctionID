import yahooapi
#import xml.etree.ElementTree
import xml.dom.minidom
import pickle


#catagoryID=2084307016
def listID(catagoryID):
	result=[]
	for i in xrange(1,3):
		category1=yahooapi.api_search(catagoryID,page=i)
		if category1==None or len(result) >100:
			break

		res=category1.get_response()
		doms = xml.dom.minidom.parse(res)
		for dom in doms.getElementsByTagName('AuctionID'):
			result += [dom.childNodes[0].data]
	return result

def createIDfile(string,catagoryID):
	f = open(string, 'w')
	IDlist=listID(catagoryID)
	print len(IDlist)
 	pickle.dump(IDlist, f)
	f.close()





		# for dom in doms.getElementsByTagName('AuctionID'):
		#     aucres=yahooapi.api_goods(dom.childNodes[0].data).get_response()
		#     if aucres == None:
		#         continue
		#     aucdoms=xml.dom.minidom.parse(aucres)
		#     print "1"
		#     aucdom = aucdoms.getElementsByTagName('EndTime')
		#     print aucdom[0].childNodes[0].data
